{% extends "status_board/base.html" %}
{% load static %}
 <!--for testing purposes, mainContent should be changed to cssLink and h1 tags removed-->
{% block mainContent %}
  <!--<script src="{% static 'status_board/loggedOut.js' %}"></script>-->
  <script src="http://malsup.github.com/jquery.form.js"></script>
    {% if user.is_authenticated and perms.catalog.has_write_access %}
        <!-- <span>Auth and has permission</span> -->
        <link rel="stylesheet" type="text/css" href="{% static 'status_board/authenticated.css' %}">
    {% elif user.is_authenticated %}
        <span> No permission</span>
        <!-- <link rel="stylesheet" type="text/css" href="{% static 'status_board/authenticated.css' %}"> -->
        <link rel="stylesheet" type="text/css" href="{% static 'status_board/notAuthenticated.css' %}">
    {% elif not user.is_authenicated %}
        <!--<span>Not Auth</span>-->
           <!--<script src="{% static 'status_board/loggedOut.js' %}"></script>-->
        <link rel="stylesheet" type="text/css" href="{% static 'status_board/notAuthenticated.css' %}">
    {% endif %}

{% endblock mainContent%}

{% block content %}
<section role="main" style="height: 95%">
  <div class="row no-gutters" id="main" style="height: 100%">

      <!-- <div class="col-sm"  style="height: inherit;"> -->
    <!-- Vertical navbar -->
    
<!-- <div class="vertical-nav bg-white" id="sidebar">
    <div class="py-4 px-3 mb-4 bg-light">
      <div class="media d-flex align-items-center">
          <h4 class="m-0">Live Airport Information System</h4>
      </div>
    </div>
  
    <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">Main</p>
  
    <ul class="nav flex-column bg-white mb-0">
        {% if user.is_authenticated %}
        <li class="nav-item">
            <a class="nav-link " href="#" style="color:black">Legend</a>
          </li>
          <li class="nav-item">
           <a class="nav-link " href="{% url 'logout' %}" style="color:black">Logout</a>
          </li>
          {% else %}
					  <li class="nav-item">
						  <a class="nav-link " href="#" style="color:black">Legend</a>
					  </li>
					  <li class="nav-item">
						 <a class="nav-link " href="{% url 'login' %}" style="color:black">Login</a>
            </li>
            {% endif %}
            <li class="nav-item" style="color:black">
                <a class="nav-link " > OPERATIONS <br>613-248-2200 </a>
              </li>
              <li class="nav-item " style="color:black">
                  <a class="nav-link " > EMERGENCY <br>613-248-2111 </a>
              </li>
         
    </ul>
      

  </div>
</div> -->
  <!-- End vertical navbar -->
      <!--Bridge Table 1st Column-->
      <div class="col-sm-6"  style="height: inherit;background-color:#282828">
        <!-- <div>
        <div style="width: 50%; color:white">
            <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Bridge</th>
                  <th scope="col">PCA</th>
                  <th scope="col">GPU</th>
                </tr>
              </thead>
        </div>
        <div style="width: 50%; color:white"">
            <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Bridge</th>
                  <th scope="col">PCA</th>
                  <th scope="col">GPU</th>
                </tr>
              </thead>
        </div>
      </div> -->
          <div class="bridgeFlexContainer border border-left-0">
              <!-- <div style="width: 50%; color:white">
                  <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Bridge</th>
                        <th scope="col">PCA</th>
                        <th scope="col">GPU</th>
                      </tr>
                    </thead>
              </div>
               -->
               
               <div style="display: inline-block;width:50%;">
             
                  <div style="display: inline-block;">#</div>
                    <div style="display: inline-block;width:25%;text-align: center;">Bridge</div>
                    <div style="display: inline-block;width:25%;text-align: center;">PCA</div>
                      <div style="display: inline-block;width:25%;text-align: center;">GPU</div>
               
               </div>
               <div style="display: inline-block;width:50%;">
             
                  <div style="display: inline-block;">#</div>
                    <div style="display: inline-block;width:25%;text-align: center;">Bridge</div>
                    <div style="display: inline-block;width:25%;text-align: center;">PCA</div>
                      <div style="display: inline-block;width:25%;text-align: center;">GPU</div>
               
               </div>
               <!-- <div style="display: inline-block;width:50%;">
                  aksfhn
                 </div> -->
              {% for bridge in bridges %}
                {% if bridge.bridgeTableID in rows %}
                  <div id="bridgeFlexItem" style="background-color:#454d55">
                  {%else%}
                  <div id="bridgeFlexItem" >
                {%endif%}
                {%if bridge.bridgeTableID <= 9  %}
                <span style="display: inline-block;">
                        <span> {{bridge.bridgeTableID}}<span style="visibility: hidden;">0</span></span>                 
                  </span>
                {% else%}
                  <span style="display: inline-block;">                   
                        <span> {{bridge.bridgeTableID}} </span>              
                  </span>
                 {%endif%}
                  {% if bridge.Bridge_Status_Choice == 'GREEN' %}
                  <span style="display: inline-block;width:25%;text-align: center;">
                      <!-- <img src='{% static "status_board/images/gCheck2.png" %}' alt="My image" class="bridge {{bridge.bridgeTableID}}"> -->
                      <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('bridge','{{bridge.bridgeTableID}}')" class="disabled"  > 
                        <!-- <span class="fas fa-check-circle fa-lg" id="bridge {{bridge.bridgeTableID}}" style="color:lime;"></span> -->
                        <i id="bridge {{bridge.bridgeTableID}}" class="myClass fas fa-check-circle fa-lg"  style="color:lime;"></i>
                        </a>
                    </span>
                      {% elif bridge.Bridge_Status_Choice == 'RED' %}
                      <span style="display: inline-block;width:25%;text-align: center;">
                        <!-- <img src='{% static "status_board/images/rX.png" %}' alt="My image" class="bridge {{bridge.bridgeTableID}}" > -->
                        <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('bridge','{{bridge.bridgeTableID}}')" class="disabled"  > 
                        <i class="fas fa-times-circle fa-lg" id="bridge {{bridge.bridgeTableID}}" style="color:red"></i>
                          </a>
                      </span>
                      {% else %}
                      <span style="display: inline-block;width:25%;text-align: center;">
                            <!-- <img src='{% static "status_board/images/yC.png" %}' alt="My image" class="bridge {{bridge.bridgeTableID}}" > -->
                            <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('bridge','{{bridge.bridgeTableID}}')" class="disabled"  > 
                              <i class="fas fa-minus-circle fa-lg" id="bridge {{bridge.bridgeTableID}}" style="color:yellow" ></i>
                            </a>
                          </span>
                  {% endif %}
                  {% if bridge.PCA_Status_Choice == 'GREEN' %}
                  <span style="display: inline-block;width:25%;text-align: center;">
                      <!-- <img src='{% static "status_board/images/gCheck2.png" %}' alt="My image" class="PCA {{bridge.bridgeTableID}}" > -->
                      <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('PCA','{{bridge.bridgeTableID}}')" class="disabled"  > 
                        <i class="fas fa-check-circle fa-lg" id="PCA {{bridge.bridgeTableID}}" style="color:lime;"></i>
                      </a>
                    </span>
                        {% elif bridge.PCA_Status_Choice == 'RED' %}
                        <span style="display: inline-block;width:25%;text-align: center;">
                          <!-- <img src='{% static "status_board/images/rX.png" %}' alt="My image" class="PCA {{bridge.bridgeTableID}}" > -->
                          <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('PCA','{{bridge.bridgeTableID}}')" class="disabled"  > 
                          <i class="fas fa-times-circle fa-lg" id="PCA {{bridge.bridgeTableID}}" style="color:red"></i>
                          </a>
                        </span>
                        {% else %}
                        <span style="display: inline-block;width:25%;text-align: center;">
                              <!-- <img src='{% static "status_board/images/yC.png" %}' alt="My image" class="PCA {{bridge.bridgeTableID}}" > -->
                              <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('PCA','{{bridge.bridgeTableID}}')" class="disabled"  > 
                              <i class="fas fa-minus-circle fa-lg" id="PCA {{bridge.bridgeTableID}}" style="color:gold"></i>
                              </a>
                            </span>
                  {% endif %}
                      {% if bridge.GPU_Status_Choice == 'GREEN' %}
                      <span style="display: inline-block;width:25%;text-align: center;">
                              <!-- <img src='{% static "status_board/images/gCheck2.png" %}' alt="My image" class="GPU {{bridge.bridgeTableID}}" > -->
                              <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('GPU','{{bridge.bridgeTableID}}')" class="disabled"  > 
                              <i class="fas fa-check-circle fa-lg " id="GPU {{bridge.bridgeTableID}}" style="color:lime;"></i>
                              </a>
                            </span>
                          {% elif bridge.GPU_Status_Choice == 'RED' %}
                          <span style="display: inline-block;width:25%;text-align: center;">
                            <!-- <img src='{% static "status_board/images/rX.png" %}' alt="My image" class="GPU {{bridge.bridgeTableID}}" > -->
                            <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('GPU','{{bridge.bridgeTableID}}')" class="disabled"  > 
                            <i class="fas fa-times-circle fa-lg" id="GPU {{bridge.bridgeTableID}}" style="color:red"></i>
                              </a>
                          </span>
                          {% else %}
                          <span style="display: inline-block;width:25%;text-align: center;">
                                <!-- <img src='{% static "status_board/images/yC.png" %}' alt="My image" class="GPU {{bridge.bridgeTableID}}" >-->
                                <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('GPU','{{bridge.bridgeTableID}}')" class="disabled"  > 
                                <i class="fas fa-minus-circle fa-lg" id="GPU {{bridge.bridgeTableID}}" style="color:gold"></i> 
                                </a>
                              </span>
                          {% endif %}
                          
              </div>
              {% endfor %}
          </div>
    </div>
    <!--Elevators 2nd Column-->
    <div class="col-sm-3 text-white" style="height: inherit" >
        <div class="height" style="background-color:#282828;" >
            <div class="border" id="elevators" style="height: 100%">
            <p style="text-align:center">Elevators</p>
        <!--<div class="d-flex flex-wrap justify-content-around" style="background-color:#282828">-->
                   <div class="flexContainer" style="height: 80%" >
              {% for elev in elevators %}
                <div class="flexItem" >       
                  <!-- <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('Elevator','{{elev.elevatorID}}')" class="disabled">  
                  </a> -->
                    <!-- 'elevatorForm' elevBtID=elev.elevatorID -->
                    {%if elev.elevatorID == '2' or elev.elevatorID == '3' or elev.elevatorID == '4' or elev.elevatorID == '7'  or elev.elevatorID == '8' or elev.elevatorID == '9'  %} 
                    <spans><span style="visibility: hidden;">0</span>{{elev.elevatorID}} </span>
                    {%else%}
                    <spans>{{elev.elevatorID}} </span>
                    {%endif%}
    
                      {% if elev.Elevator_Status_Choice == 'GREEN' %}
                      <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('Elevator','{{elev.elevatorID}}')" class="disabled"  > 
                        <i class="fas fa-check-circle fa-lg " id="Elev {{elev.elevatorID}}" title="Status changed on: {{elev.updated}}" style="color:lime;"></i>
                        </a>
                            <!-- <img src='{% static "status_board/images/greenElev.png" %}' alt="My image" class="Elev {{elev.elevatorID}}" title="Status changed on: {{elev.updated}}"> -->
                      {% elif elev.Elevator_Status_Choice == 'RED' %}
                      <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('Elevator','{{elev.elevatorID}}')" class="disabled"  > 
                        <i class="fas fa-times-circle fa-lg" id="Elev {{elev.elevatorID}}" title="Status changed on: {{elev.updated}}" style="color:red"></i>
                        </a>      
                      <!-- <img src='{% static "status_board/images/redElev.png" %}' alt="My image" class="Elev {{elev.elevatorID}}" title="Status changed on : {{elev.updated}}"> -->
                      {% endif %}
                </div>
            {% endfor %}
            </div>
            </div>
            </div>
                  <!--hide when user is not authenticated-->
            <!--DOM / INT PBS-->
            <div  class="notAuth" style="height:50%">
              <div class="bg-dark border" id ="pbs" style="height:50%">
                     <p style="text-align:center">Pre Board Screening</p>
                     <div class="col sysContainer"  >
                     {% for dmPBS  in domIntPBS %}
                        <div  style="flex:0 0 100%; text-align:center ">
                            {% if dmPBS.DomIntPBS_Status_Choice == 'GREEN' %}
                            <p class="domPBS {{dmPBS.domIntPBSID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'domIntPBSForm' btID=dmPBS.domIntPBSID%}" class="disabled" style="color:inherit"> <span>DOM/INT PBS</span>  </a> </p>
                             {% elif dmPBS.DomIntPBS_Status_Choice == 'YELLOW' %}
                              <p class="domPBS {{dmPBS.domIntPBSID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'domIntPBSForm' btID=dmPBS.domIntPBSID%}" class="disabled" style="color:inherit"> <span>DOM/INT PBS</span>  </a>  </p>
                            {% elif  dmPBS.DomIntPBS_Status_Choice == 'RED' %}
                              <p class="domPBS {{dmPBS.domIntPBSID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'domIntPBSForm' btID=dmPBS.domIntPBSID%}" class="disabled" style="color:inherit"> <span>DOM/INT PBS</span>  </a>  </p>
                            {% endif %}

  
                     {% endfor %}

                    </div>
  
             <!-- Yellow selection does not work for below!!!!-->
             <!-- TB PBS System-->
                <!--<div class="col notAuth">-->
                     {% for tPBS in tbPBS %}
                        <div style="flex:0 0 100%; text-align:center ">
                            {% if tPBS.TbPBS_Status_Choice == 'GREEN' %}
                            <p class="tbPBS {{tPBS.tbPBSID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'tbPBSForm' btID=tPBS.tbPBSID%}" class="disabled" style="color:inherit"> <span>TB PBS</span></a> </p>
                             {% elif tPBS.TbPBS_Status_Choice == 'YELLOW' %}
                              <p class="tbPBS {{tPBS.tbPBSID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'tbPBSForm' btID=tPBS.tbPBSID%}" class="disabled" style="color:inherit"> <span>TB PBS</span></a> </p>
                            {% elif  tPBS.TbPBS_Status_Choice == 'RED' %}
                              <p class="tbPBS {{tPBS.tbPBSID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'tbPBSForm' btID=tPBS.tbPBSID%}" class="disabled" style="color:inherit"> <span>TB PBS</span></a> </p>
                            {% endif %}
                        </div>
  
                     {% endfor %}
                      </div>
                </div>


              <!-- Other Systems-->
                <!-- Lav Hut -->
                <div class="border" style="background-color: #282828;height:50%" id ="other">
                
                    <p style="text-align:center ;flex:0 0 100%; ">Other Systems</p>
                    <div class="col notAuth othSysContainer" >
                  {% for lHut in lavHut %}
                     <div style="flex:0 0 100%; text-align:center ">
                         {% if lHut.LavHut_Status_Choice == 'GREEN' %}
                         <p class="lHut {{lHut.lavHutID}}" style="color: #2ECC71; text-align:center"> <a href="{% url 'lavHutForm' btID=lHut.lavHutID%}" class="disabled" style="color:inherit"> <span>LAV HUT</span></a> </p>
                          {% elif lHut.LavHut_Status_Choice == 'YELLOW' %}
                           <p class="lHut {{lHut.lavHutID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'lavHutForm' btID=lHut.lavHutID%}" class="disabled" style="color:inherit"> <span>LAV HUT</span></a> </p>
                         {% elif  lHut.LavHut_Status_Choice == 'RED' %}
                           <p class="lHut {{lHut.lavHutID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'lavHutForm' btID=lHut.lavHutID%}" class="disabled" style="color:inherit"> <span>LAV HUT</span></a> </p>
                         {% endif %}
                     </div>
  
                  {% endfor %}


             <!-- Water Fill -->

         


                         <!--Electrical Charging-->



         </div>
        </div>
        </div>
  </div>


             
    
    
    <!--Escalators 3rd Column-->
    <div class="col-sm-3 text-white" style="height: inherit;">
      <div class="height" style="background-color:#343a40;" >
        <div class="border" id="escalator" style="height: 100%">
        <!-- <div class="border bg-dark notAuthHeight" id="escalators" style="height:min-content"> -->
            <p style="text-align:center">Escalators</p>

        <!-- <div class="d-flex flex-wrap justify-content-around text-white"> -->
          <div class="flexContainer" style="height: 80%">
              {% for esc in escalators %}
            <div class="flexItem">
            <!-- <div class="p-2 align-self-center" style="width:50%;" > -->
              {%if esc.escalatorID != '10' or esc.escalatorID != '11' or esc.escalatorID != '11' %}
                        <span><span style="visibility: hidden;">0</span>{{esc.escalatorID}}</span>
                {%else%}
                <span>{{esc.escalatorID}}</span>
                {%endif%}
                    
                      {% if esc.Escalator_Status_Choice == 'GREEN' %}
                            <!-- <img src='{% static "status_board/images/greenEsc.png" %}' alt="My image" class="Esc {{esc.escalatorID}} "> -->
                            <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('Escalator','{{esc.escalatorID}}')" class="disabled"  > 
                              <i class="fas fa-check-circle fa-lg " id="Esc {{esc.escalatorID}}" title="Status changed on: {{esc.updated}}" style="color:lime;"></i>
                              </a>
                      {% elif esc.Escalator_Status_Choice == 'RED' %}
                            <!-- <img src='{% static "status_board/images/redEsc.png" %}' alt="My image" class="Esc {{esc.escalatorID}}"> -->
                            <a data-toggle="modal" data-target="#modal" href="{% url 'updateSys' %}" onclick="setGetParameter('Escalator','{{esc.escalatorID}}')" class="disabled"  > 
                              <i class="fas fa-times-circle fa-lg" id="Esc {{esc.escalatorID}}" title="Status changed on: {{esc.updated}}" style="color:red"></i>
                              </a>      
                      {% endif %}
                </div>
            {% endfor %}
            </div>
           </div>
           </div>
    
             <!--hide when user is not authenticated-->
            <!--DOM / INT Baggage System-->

        <!-- <div  style="height:min-content"> -->
          <div class="notAuth" style="height:50%">
           <!-- <div class ="border text-white" id="baggagge"> -->
              <div class="bg-dark border" id ="baggagge" style="height:100%">
            <!-- <div class="col notAuth"> -->
                 <p style="text-align:center">Baggage</p>
                 <div class="col sysContainer"  >
                    <div  style="flex:0 0 100%; text-align:center ">
                 {% for domIntBag in domIntBaggage %}
                    <!-- <div class="p-2" > -->
                        
                        {% if domIntBag.DomIntBaggage_Status_Choice == 'GREEN' %}
                        <p class="domBag {{domIntBag.domIntBaggageID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'domIntBaggageForm' btID=domIntBag.domIntBaggageID%}" class="disabled" style="color:inherit"> <span>DOM/INT BAGGAGE SYSTEM</span>  </a> </p>
                         {% elif domIntBag.DomIntBaggage_Status_Choice == 'YELLOW' %}
                          <p class="domBag {{domIntBag.domIntBaggageID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'domIntBaggageForm' btID=domIntBag.domIntBaggageID%}" class="disabled" style="color:inherit"> <span>DOM/INT BAGGAGE SYSTEM</span>  </a>  </p>
                        {% elif  domIntBag.DomIntBaggage_Status_Choice == 'RED' %}
                          <p class="domBag {{domIntBag.domIntBaggageID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'domIntBaggageForm' btID=domIntBag.domIntBaggageID%}" class="disabled" style="color:inherit"> <span>DOM/INT BAGGAGE SYSTEM</span>  </a>  </p>
                        {% endif %}
                 {% endfor %}

                 <!-- TB Baggage -->
                 {% for tbBag in tbBaggage %}
                 <div class="p-2" >
                     {% if tbBag.TbBaggage_Status_Choice == 'GREEN' %}
                     <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                      {% elif tbBag.TbBaggage_Status_Choice == 'YELLOW' %}
                       <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                     {% elif  tbBag.TbBaggage_Status_Choice == 'RED' %}
                       <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                     {% endif %}
                 </div>

              {% endfor %}

            <!-- DOM/INT  -->
            {% for domOversize in domIntOversize %}
            <div class="p-2" >
                {% if domOversize.DomIntOversize_Status_Choice == 'GREEN' %}
                <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#2ECC71; text-align:center"><a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                 {% elif domOversize.DomIntOversize_Status_Choice == 'YELLOW' %}
                  <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                {% elif  domOversize.DomIntOversize_Status_Choice == 'RED' %}
                  <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#E74C3C; text-align:center"><a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                {% endif %}
            </div>

         {% endfor %}

         <!-- TB OVERSIZE -->
         {% for tbOver in tbOversize %}
                    <div class="p-2" >
                        {% if tbOver.TbOversize_Status_Choice == 'GREEN' %}
                             <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a>  </p>
                         {% elif tbOver.TbOversize_Status_Choice == 'YELLOW' %}
                          <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a> </p>
                        {% elif  tbOver.TbOversize_Status_Choice == 'RED' %}
                          <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a> </p>
                        {% endif %}
                    </div>
  
                 {% endfor %}
                </div>
            </div>
  
         <!-- TB Baggage System
            <div class="col notAuth">
                 {% for tbBag in tbBaggage %}
                    <div class="p-2" >
                        {% if tbBag.TbBaggage_Status_Choice == 'GREEN' %}
                        <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                         {% elif tbBag.TbBaggage_Status_Choice == 'YELLOW' %}
                          <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                        {% elif  tbBag.TbBaggage_Status_Choice == 'RED' %}
                          <p class="tbBag {{tbBag.tbBaggageID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'tbBaggageSystemsForm' btID=tbBag.tbBaggageID%}" class="disabled" style="color:inherit"> <span>TB BAGGAGE SYSTEM</span></a> </p>
                        {% endif %}
                    </div>
  
                 {% endfor %}
            </div>
  
                 DOM / INT Baggage Oversize 
            <div class="col notAuth">
                 {% for domOversize in domIntOversize %}
                    <div class="p-2" >
                        {% if domOversize.DomIntOversize_Status_Choice == 'GREEN' %}
                        <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#2ECC71; text-align:center"><a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                         {% elif domOversize.DomIntOversize_Status_Choice == 'YELLOW' %}
                          <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                        {% elif  domOversize.DomIntOversize_Status_Choice == 'RED' %}
                          <p class="domBagOver {{domOversize.domIntOversizeID}}" style="color:#E74C3C; text-align:center"><a href="{% url 'domIntOversizeForm' btID=domOversize.domIntOversizeID%}" class="disabled" style="color:inherit"> <span> DOM / INT OVERSIZE</span></a> </p>
                        {% endif %}
                    </div>
  
                 {% endfor %}
            </div>
  
                 TB Oversize 
                 <div class="col notAuth">
  
  
                 {% for tbOver in tbOversize %}
                    <div class="p-2" >
                        {% if tbOver.TbOversize_Status_Choice == 'GREEN' %}
                             <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#2ECC71; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a>  </p>
                         {% elif tbOver.TbOversize_Status_Choice == 'YELLOW' %}
                          <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#F1C40F; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a> </p>
                        {% elif  tbOver.TbOversize_Status_Choice == 'RED' %}
                          <p class="tbOver {{tbOver.tbOversizeID}}" style="color:#E74C3C; text-align:center"> <a href="{% url 'tbOversizeForm' btID=tbOver.tbOversizeID%}" style="color:inherit" class="disabled"> <span>TB OVERSIZE</span> </a> </p>
                        {% endif %}
                    </div>
  
                 {% endfor %}
            </div> -->
          </div>
          </div>
        

    </div>

</div>
</div>

</section>

<!-- modal container -->
<div class="modal" id="modal"></div>

<script src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" data-auto-replace-svg="nest"></script>


<!-- script for sending ID of a system to the view through AJAX-->
<script>
var sys
var id 
    function setGetParameter(system, ID){
      sys = system;
      id = ID;

    }
    </script>

 <!-- script for showing BS modal -->
 <script>
    $('#modal').on('show.bs.modal', function (event) {
      console.log('im in modal before show');
      console.log('id is ' + id + ' system ' + sys)
        var modal = $(this)
        $.ajax({
            type : "POST",
            url: "{% url 'updateSys' %}",
            data: { system: sys, ID: id, csrfmiddlewaretoken:"{{csrf_token}}"},
            context: document.body
        }).done(function(response) {
            modal.html(response);
        });
    })
    </script>

<script>

var loc = window.location
//var form = $('#formData')
var wsStart = 'ws://'
if (loc.protocol == 'https:'){
    wsStart = 'wss://'
}
var endpoint = wsStart + loc.host + loc.pathname
console.log(loc.host)
console.log(loc.pathname)

 var socket = new WebSocket(endpoint)
console.log('CONNECTED TO RECIEVE')
   socket.onmessage = function(e){
     console.log('messageeeeeeeeee',e)
        var data = JSON.parse(e.data)
        if (data.fromCon == 'bridgeTable'){
                var bridgeTableId = data.bridgeTableID
                var bridgeStat = data.bridgeStat
                var bridge = 'bridge ' + bridgeTableId
                var bridgeIMG = document.getElementById(bridge)
                    if (bridgeStat == 'GREEN'){
                        $(bridgeIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-check-circle');
                         bridgeIMG.style.color = "lime"
                    }
                     else if (bridgeStat == 'YELLOW'){
                      $(bridgeIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-minus-circle');
                      bridgeIMG.style.color = "gold"
                     }
                     else if (bridgeStat == 'RED'){
                        $(bridgeIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-times-circle');
                          bridgeIMG.style.color = "red"
                     }           
        }
        else if (data.fromCon == 'pcaTable'){
          var bridgeTableId = data.bridgeTableID
          var pcaStat = data.pcaStat
          var pca = 'PCA ' + bridgeTableId
          var pcaIMG = document.getElementById(pca)

          if (pcaStat == 'GREEN'){
              $(pcaIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-check-circle');
                pcaIMG.style.color = "lime"
              }
          else if (pcaStat == 'YELLOW'){
            $(pcaIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-minus-circle');
             pcaIMG.style.color = "gold"
            }
          else if (pcaStat == 'RED'){
             $(pcaIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-times-circle');
              pcaIMG.style.color = "red"
            }
        }
        else if (data.fromCon == 'gpuTable'){
          var bridgeTableId = data.bridgeTableID
          var gpuStat = data.gpuStat
          var gpu = 'GPU ' + bridgeTableId
          var gpuIMG = document.getElementById(gpu)
          
          if (gpuStat == 'GREEN'){
            $(gpuIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-check-circle');
             gpuIMG.style.color = "lime"
          }
          else if (gpuStat == 'YELLOW'){
            $(gpuIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-minus-circle');
            gpuIMG.style.color = "gold"
            }
          else if (gpuStat == 'RED'){
             $(gpuIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-times-circle');
             gpuIMG.style.color = "red"
            }
        }
        else if (data.fromCon == 'msg'){
          msgID = data.msgID
          msg = data.msg
          changeMsg = document.getElementById('adHocMsg').innerHTML = msg
        }
        else if (data.fromCon == 'elevator'){
             var elevatorID = data.elevatorID
                var elevatorStat = data.elevatorStat

                var elev = 'Elev ' + elevatorID
                console.log('elev' + elev)
                 var elevIMG = document.getElementById(elev)
                  if (elevatorStat == 'GREEN'){
                    $(elevIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-check-circle');
                    elevIMG.style.color = "lime"
                  }                     
                  else if (elevatorStat == 'RED'){
                      $(elevIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-times-circle');
                      elevIMG.style.color = "red"
                     }            
        }
        else if (data.fromCon == 'escalator'){
          console.log('IN EsC')
             var escalatorID = data.escalatorID
                var escalatorStat = data.escalatorStat

                var esc = 'Esc ' + escalatorID
                console.log('IN EsC' + esc)
                 var escIMG = document.getElementById(esc)
                  if (escalatorStat == 'GREEN')
                  {
                    $(escIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-check-circle');
                    escIMG.style.color = "lime"
                  }  
                     else if (escalatorStat == 'RED')
                        {$(escIMG).find('[data-fa-i2svg]').toggleClass('').toggleClass('fa-times-circle');
                        escIMG.style.color = "red"
                     }            
        }

        else if (data.fromCon == 'domIntBag'){
            var domIntBagID = data.domIntBagId
            var domIntBagStat = data.domIntBagStat

            var domIntBag = 'domBag ' + domIntBagID

            var domIntBagTXT = document.getElementsByClassName(domIntBag)[0]

                 if (domIntBagStat == 'GREEN')
                        domIntBagTXT.style.color = green
                   else if (domIntBagStat == 'YELLOW')
                        domIntBagTXT.style.color = yellow
                     else if (domIntBagStat == 'RED')
                        domIntBagTXT.style.color = red
        }

        else if (data.fromCon == 'tbBag'){
            var tbBagID = data.tbBagID
            var tbBagStat = data.tbBagStat

            var tbBag = 'tbBag ' + tbBagID

            var tbBagTXT = document.getElementsByClassName(tbBag)[0]

                 if (tbBagStat == 'GREEN')
                        tbBagTXT.style.color = green
                   else if (tbBagStat == 'YELLOW')
                        tbBagTXT.style.color = yellow
                     else if (tbBagStat == 'RED')
                        tbBagTXT.style.color = red
        }
        else if (data.fromCon == 'domIntOversize'){
            var domIntOversizeID = data.domIntOversizeID
            var domIntOversizeStat = data.domIntOversizeStat

            var domIntOversize = 'domBagOver ' + domIntOversizeID

            var domIntOverTXT = document.getElementsByClassName(domIntOversize)[0]

                 if (domIntOversizeStat == 'GREEN')
                        domIntOverTXT.style.color = green
                   else if (domIntOversizeStat == 'YELLOW')
                        domIntOverTXT.style.color = yellow
                     else if (domIntOversizeStat == 'RED')
                        domIntOverTXT.style.color = red
        }
        else if (data.fromCon == 'tbOversize'){
            var tbOversizeID = data.tbOversizeID
            var tbOversizeStatus = data.tbOversizeStatus

            var tbOversize = 'tbOver ' + tbOversizeID

            var tbBagOverTXT = document.getElementsByClassName(tbOversize)[0]

                 if (tbOversizeStatus == 'GREEN')
                        tbBagOverTXT.style.color = green
                   else if (tbOversizeStatus == 'YELLOW')
                        tbBagOverTXT.style.color = yellow
                     else if (tbOversizeStatus == 'RED')
                        tbBagOverTXT.style.color = red
        }  
    }

    socket.onopen = function(e){
        console.log('opennnnnnnnnnnnn',e)
        }

socket.onerror = function(e){
console.log('error',e)
}
socket.onclose = function(e){
console.log('closedddddddddddddddddd',e)
}

</script>

{% endblock content %}
